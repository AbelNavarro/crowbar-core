%h1= @title

%p= @members.inspect

%table.data.box
  //=begin render :partial => "barclamp/#{@bc_name}/index" rescue (render :partial => 'barclamp/index') end

:javascript
  function update() {
    $.ajaxSetup({ timeout: 3000 })
    $.getJSON('#{status_barclamp_path}', function(data) {

      // If role has changed, re-render the page
      var count = $('.bc').length;
      if(data['count'] != count) {
        //location.reload();
      }

      // Update roles
      $.each(data['roles'], function(key,val) {
        var td = $('#'+key+' td');
        var led = td.children('.led');
        if(!led.hasClass(val)){
          led.attr('class', 'led '+val);
          td.effect("highlight", {color: '#666666'}, 2000);
        }
      });

    });
  }

