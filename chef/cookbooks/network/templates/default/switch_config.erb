{
  "sysloginfo": [
    {
      "loglevel":"WARN",
      "logservers":[
        {
          "serverip":"<%= @admin_node_ip %>",
          "port_num":514,
          "description":"Crowbar admin node"
        }
      ]
    }
  ],

  "vlans": [
    <% @unique_vlans.each do | vlan| %>
    {
      "vlan_name": "vlan<%= vlan %>",
      "vlan_id": <%= vlan %>
    }<%= "," if vlan != @unique_vlans.last %>
    <% end %>
  ],

  "LAGs": [
  <% lags = @lags.keys.sort %>
  <% lags.each do |lag_id| %>
    {
      "lag_id": <%= lag_id %>,
      "ports": [
      <% ports = @lags[lag_id]["ports"] %>
      <% ports.each do |port_key| %>
        { "port_id": "<%= port_key %>" }<%= "," if port_key != ports.last %>
      <% end %>
      ]
    }<%= "," if lag_id != lags.last %>
  <% end %>
  ],

  "interfaces": [
    <% interfaces = @interfaces.keys.sort %>
    <% interfaces.each do |interface_id| %>
    {
      "id": "<%= interface_id %>",
      "vlans": [
      <% vlans = @interfaces[interface_id].keys.sort %>
      <% vlans.each do |vlan| %>
        { 
          "vlan_name": "vlan<%= vlan %>",
          "vlan_mode": "<%= @interfaces[interface_id][vlan] ? "TAGGED" : "UNTAGGED" %>"
        }<%= "," if vlan != vlans.last %>
      <% end %>
      ]
    }<%= "," if interface_id != interfaces.last %>
    <% end %>
  ]
}
