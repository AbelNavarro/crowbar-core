# Managed by Crowbar.
# Do not edit.
{
  ####################################
  # sysloginfo
  ####################################
  "sysloginfo": [
   {
      "loglevel":"WARN",
      "logservers":[
        {
          "serverip":"<%= @admin_node_ip %>"
          "port_num":514
          "description":"Crowbar admin node"
        }
      ]
    }
  ]

  ####################################
  # vlans
  ####################################
  "vlans": [
    <% @unique_vlans.each do | vlan| -%>
    {
      "vlan_name": "vlan<%= vlan %>",
      "vlan_id": <%= vlan %>
    },
    <% end %>
  ]

  ####################################
  # LAGs
  ####################################
  "LAGs": [
    {
      "lag_id": 1,
      "lag_mode": "STATIC",
      "ports": [
        { "port_id": "1/0/1" },
        { "port_id": "1/0/2" },
        { "port_id": "1/0/3" },
        { "port_id": "1/0/4" },
      ]
    },
    {
      "lag_id": 2,
      "lag_mode": "DYNAMIC",
      "ports": [
        { "port_id": "1/0/5" },
        { "port_id": "1/0/6" },
        { "port_id": "1/0/7" },
        { "port_id": "1/0/8" },
      ]
    },
    {
      "lag_id": 3,
      "lag_mode": "STATIC",
      "ports": [
        { "port_id": "1/0/9" },
        { "port_id": "1/0/10" },
        { "port_id": "1/0/11" },
        { "port_id": "1/0/12" },
      ]
    }
  ]

  ####################################
  # Interfaces
  ####################################
  "interfaces": [
    {
    <% @interfaces.each do |port_key, vlans_for_interface| -%>
      "id": <%= port_key %>
      "vlans": [
      <% vlans_for_interface.keys.sort.each do |vlan| -%>
        { 
          "vlan_name": "vlan<%= vlan %>",
          "vlan_mode": "UNTAGGED",
        },
      <% end %>
      ],
    <% end %>
    },
  ]
}
